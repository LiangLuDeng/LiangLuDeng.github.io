---
layout:     post   				    # 使用的布局（不需要改）
title:      侧栏悬浮窗 				# 标题 
subtitle:   Happy New Year！ #副标题
date:       2019-01-14				# 时间
author:     DLL						# 作者
header-img: img/wall.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - react
    - component
---

# 悬浮窗

> 项目新需求，要做一个首页快捷搜索的`悬浮框`，建议做成可拖拽的，后来由于技艺不精，只能在“可拖拽”和“侧边悬浮栏”中，二选一。

## 可拖拽式悬浮窗
 借助dragM.js第三方react插件，将需要拖拽的内容包裹在`<dragM></dragM>`标签中
 缺点是: 没有边界限制，会脱出界

## 侧边攀附，点击弹出式悬浮窗
> 尝试了两种方法，基本原理都是，点击事件改变`display`的属性，`none`<====>`display`

### 动画`animation/keyframes`，配合dom节点的点击时间
```js
componentDidMount() {
    const label = document.getElementById('label');
    const bounce = document.getElementById('bounce');
    label.onclick = () => {
      if (bounce.style.display === 'block') {
        bounce.style.display = 'none';
      } else {
        bounce.style.display = 'block';
      }
    };
  }
```

### css过渡`transform`,配合插件`classnames`
> npm i classnames --save 
> import classnames from 'classnames'
```js
const labelStyle = () => {
    return FVisible ? [styles.label, styles.labelActive] : styles.label;
};
const divContent = (
    <div>
    {content}
    </div>
);
// 点击
  sClick = () => {
    const { FVisible } = this.state; // FVisible初始值为false
    this.setState({
      FVisible: !FVisible,
    });
  }
...
<div style={{ zIndex: 999 }}>
    <div className={classnames(labelStyle())}>
        <div className={styles.areaBtn} onClick={this.sClick}>
            <Icon type="search" className={styles.icon} />
            <span style={{ width: 13, fontSize: 13, textAlign: 'center' }}>
            快捷查询
            </span>
        </div>
        <div style={{ height: '100%', zIndex: 999 }}>
        {divContent}
        </div>
    </div>
</div>
```
#### less样式
```less
.label {
  position: absolute;
  top: 3%;
  right: -15px;
  width: 350px;
  height: 30%;
  padding: 8px;
  border-radius: 8px 0 0 8px;
  box-shadow: 0 2px 8px 0 rgba(174, 174, 174, 0.5);
  background-color: white;
  transform: translateX(100%); // 过渡
  transition: all ease .3s;
  .areaBtn {
    padding-right: 5.5px;
    padding-left: 5.5px;
    position: absolute;
    width: 30px;
    height: 110px;
    left: -32px;
    top: 13px;
    border-radius: 8px 0 0 8px;
    box-shadow: -3px 2px 7px 0 rgba(174, 174, 174, 0.5);
    background-color: #1890ff;
    cursor: pointer;
    text-align: center;
    color: #fff;
    transition: all ease .3s;
    >i {
      line-height: 14px;
      font-size: 14px;
    }
  }
  &.labelActive {
    transform: translateX(0);// 过渡
  }
}
```

### 点击侧边栏，icon的方向、颜色等样式的改变
同样是配合`classnames`使用，` transform: rotate(0); ` =>` transform: rotate(180);`即可转换角度

### > 、< 等符号，
可通过设置盒子相邻两条边，再`transform: rotate(45);`或者`transform: rotate(-135);`